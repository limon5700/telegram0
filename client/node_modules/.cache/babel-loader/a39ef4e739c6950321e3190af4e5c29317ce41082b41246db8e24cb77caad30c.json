{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Profile.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(){const navigate=useNavigate();const[user,setUser]=useState(null);const[editMode,setEditMode]=useState(false);const[profileImage,setProfileImage]=useState(null);const[name,setName]=useState('');const[email,setEmail]=useState('');useEffect(()=>{const stored=localStorage.getItem('user');if(stored){const parsed=JSON.parse(stored);setUser(parsed);setName(parsed.name);setEmail(parsed.email);setProfileImage(parsed.profileImage||'/default-profile.png');}else{navigate('/login');}},[navigate]);const handleSave=async()=>{const updatedUser={...user,name,email,profileImage};try{await axios.put(`http://localhost:5000/update-user/${user.id}`,updatedUser);// Update localStorage after successful database update\nlocalStorage.setItem('user',JSON.stringify(updatedUser));setUser(updatedUser);setEditMode(false);alert('Profile updated successfully!');}catch(err){console.error('Failed to update user:',err);alert('Failed to update profile');}};// Handle profile picture change\nconst handleProfilePicChange=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setProfileImage(reader.result);};reader.readAsDataURL(file);}};// Handle logout\nconst handleLogout=()=>{localStorage.removeItem('user');navigate('/login');};//   // Save profile updates\n//   const handleSave = () => {\n//     const updatedUser = { ...user, name, email, profileImage };\n//     localStorage.setItem('user', JSON.stringify(updatedUser));\n//     setEditMode(false); // Exit edit mode\n//   };\n// Cancel editing and reset to original user data\nconst handleCancel=()=>{setName(user.name);setEmail(user.email);setProfileImage(user.profileImage||'/default-profile.png');setEditMode(false);};// Handle close profile page\nconst handleCloseProfile=()=>{navigate('/Home');// Navigate back to home\n};if(!user)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:handleCloseProfile,children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Your Profile\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-img-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:profileImage,alt:\"Profile\",className:\"profile-img\"}),editMode&&/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"file-input\",onChange:handleProfilePicChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-data\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value)}):/*#__PURE__*/_jsx(\"p\",{children:name}),/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),editMode?/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value)}):/*#__PURE__*/_jsx(\"p\",{children:email}),/*#__PURE__*/_jsx(\"label\",{children:\"User ID:\"}),/*#__PURE__*/_jsx(\"p\",{children:user.id}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-buttons\",children:[editMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:handleCancel,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"save-btn\",onClick:handleSave,children:\"Save\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:()=>setEditMode(true),children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Logout\"})]})]})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","navigate","user","setUser","editMode","setEditMode","profileImage","setProfileImage","name","setName","email","setEmail","stored","localStorage","getItem","parsed","JSON","parse","handleSave","updatedUser","put","id","setItem","stringify","alert","err","console","error","handleProfilePicChange","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleLogout","removeItem","handleCancel","handleCloseProfile","children","className","onClick","src","alt","type","accept","onChange","value"],"sources":["C:/Users/adora/Desktop/local server - Copy/client/src/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Profile.css';\r\n\r\nfunction Profile() {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState(null);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [profileImage, setProfileImage] = useState(null);\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem('user');\r\n    if (stored) {\r\n      const parsed = JSON.parse(stored);\r\n      setUser(parsed);\r\n      setName(parsed.name);\r\n      setEmail(parsed.email);\r\n      \r\n      setProfileImage(parsed.profileImage || '/default-profile.png');\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [navigate]);\r\n\r\n\r\n  const handleSave = async () => {\r\n    const updatedUser = { ...user, name, email, profileImage };\r\n  \r\n    try {\r\n      await axios.put(`http://localhost:5000/update-user/${user.id}`, updatedUser);\r\n      // Update localStorage after successful database update\r\n      localStorage.setItem('user', JSON.stringify(updatedUser));\r\n      setUser(updatedUser);\r\n      setEditMode(false);\r\n      alert('Profile updated successfully!');\r\n    } catch (err) {\r\n      console.error('Failed to update user:', err);\r\n      alert('Failed to update profile');\r\n    }\r\n  };\r\n  \r\n\r\n  // Handle profile picture change\r\n  const handleProfilePicChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setProfileImage(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  // Handle logout\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    navigate('/login');\r\n  };\r\n\r\n//   // Save profile updates\r\n//   const handleSave = () => {\r\n//     const updatedUser = { ...user, name, email, profileImage };\r\n//     localStorage.setItem('user', JSON.stringify(updatedUser));\r\n//     setEditMode(false); // Exit edit mode\r\n//   };\r\n\r\n  // Cancel editing and reset to original user data\r\n  const handleCancel = () => {\r\n    setName(user.name);\r\n    setEmail(user.email);\r\n    setProfileImage(user.profileImage || '/default-profile.png');\r\n    setEditMode(false);\r\n  };\r\n\r\n  // Handle close profile page\r\n  const handleCloseProfile = () => {\r\n    navigate('/Home'); // Navigate back to home\r\n  };\r\n\r\n  if (!user) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"profile-page\">\r\n      <div className=\"profile-header\">\r\n        <button className=\"close-btn\" onClick={handleCloseProfile}>Ã—</button>\r\n        <h2>Your Profile</h2>\r\n      </div>\r\n\r\n      <div className=\"profile-info\">\r\n        <div className=\"profile-img-container\">\r\n          <img\r\n            src={profileImage}\r\n            alt=\"Profile\"\r\n            className=\"profile-img\"\r\n          />\r\n          {editMode && (\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              className=\"file-input\"\r\n              onChange={handleProfilePicChange}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"profile-data\">\r\n          <label>Name:</label>\r\n          {editMode ? (\r\n            <input\r\n              type=\"text\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n            />\r\n          ) : (\r\n            <p>{name}</p>\r\n          )}\r\n\r\n          <label>Email:</label>\r\n          {editMode ? (\r\n            <input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          ) : (\r\n            <p>{email}</p>\r\n          )}\r\n\r\n          {/* Displaying User ID */}\r\n          <label>User ID:</label>\r\n          <p>{user.id}</p> {/* Displaying the user ID here */}\r\n        </div>\r\n\r\n        <div className=\"profile-buttons\">\r\n          {editMode ? (\r\n            <>\r\n              <button className=\"cancel-btn\" onClick={handleCancel}>Cancel</button>\r\n              <button className=\"save-btn\" onClick={handleSave}>Save</button>\r\n            </>\r\n          ) : (\r\n            <button className=\"edit-btn\" onClick={() => setEditMode(true)}>Edit Profile</button>\r\n          )}\r\n          <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}