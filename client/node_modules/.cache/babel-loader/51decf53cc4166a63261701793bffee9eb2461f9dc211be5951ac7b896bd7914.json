{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useNavigate}from'react-router-dom';import io from'socket.io-client';import axios from'axios';import'./Home.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const socket=io('http://localhost:5000');function Home(){const navigate=useNavigate();const[user,setUser]=useState(null);const[friends,setFriends]=useState([]);const[selectedFriend,setSelectedFriend]=useState(null);const[messages,setMessages]=useState([]);const[content,setcontent]=useState('');const[searchQuery,setSearchQuery]=useState('');const[menuOpen,setMenuOpen]=useState(false);const messagesEndRef=useRef(null);useEffect(()=>{const stored=localStorage.getItem('user');if(stored){const parsed=JSON.parse(stored);setUser(parsed);}else{navigate('/login');}},[navigate]);useEffect(()=>{if(user!==null&&user!==void 0&&user._id){socket.emit('register',user._id);}},[user]);useEffect(()=>{axios.get('http://localhost:5000/users').then(res=>{setFriends(res.data);});},[]);useEffect(()=>{if(user&&selectedFriend){axios.get(`http://localhost:5000/messages/${user._id}/${selectedFriend._id}`).then(res=>setMessages(res.data)).catch(err=>console.log(err));}},[selectedFriend]);useEffect(()=>{if(!user)return;const handleNewMessage=msg=>{const isCurrentChat=selectedFriend&&(msg.sender===user._id&&msg.receiver===selectedFriend._id||msg.sender===selectedFriend._id&&msg.receiver===user._id);if(isCurrentChat){setMessages(prev=>[...prev,msg]);}};socket.on('newMessage',handleNewMessage);return()=>socket.off('newMessage',handleNewMessage);},[selectedFriend,user]);const fetchMessages=async friend=>{setSelectedFriend(friend);setMessages([]);try{const res=await axios.get(`http://localhost:5000/messages/${user._id}/${friend._id}`);setMessages(res.data);}catch(err){console.error(\"Error fetching messages:\",err);}};const sendMessage=async()=>{if(!content.trim())return;const newMsg={sender:user._id,receiver:selectedFriend._id,content,timestamp:new Date(),status:'sent'};try{await axios.post('http://localhost:5000/message',{sender:user._id,receiver:selectedFriend._id,content});setMessages(prev=>[...prev,newMsg]);socket.emit('send-message',newMsg);setcontent('');}catch(err){console.error('Error sending message:',err);}};const handleLogout=()=>{localStorage.removeItem('user');navigate('/login');};const handleProfileClick=()=>{navigate('/profile');};const scrollToLastMessages=()=>{const container=document.querySelector('.messages');if(container){const all=container.children;if(all.length>10){const target=all[all.length-11];target===null||target===void 0?void 0:target.scrollIntoView({behavior:'auto'});}else{container.scrollTop=container.scrollHeight;}}};const formatMessage=function(){let text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';let wordsPerLine=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;const words=text.split(' ');let result='';for(let i=0;i<words.length;i++){result+=words[i]+' ';if((i+1)%wordsPerLine===0)result+='\\n';}return result.trim();};useEffect(()=>{scrollToLastMessages();},[messages]);if(!user)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-app\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{class:\"dropbtn\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u2630\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"dropdown-content\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleProfileClick,children:\"Profile\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Telegram\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"limon\",children:[/*#__PURE__*/_jsx(\"img\",{src:user.profileImage||'/default-profile.png',alt:\"Profile\",className:\"profile-img\"}),/*#__PURE__*/_jsx(\"h2\",{children:user.name})]})})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search friend\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"search-bar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"friend-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Chat List\"}),friends.filter(f=>f._id!==user._id&&f.name&&f.name.toLowerCase().includes((searchQuery||'').toLowerCase())).map(friend=>/*#__PURE__*/_jsx(\"div\",{className:\"friend\",onClick:()=>fetchMessages(friend),children:friend.name},friend._id))]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chatbox\",children:selectedFriend?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:selectedFriend.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"messages\",children:[messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:msg.sender===user._id?'message me':'message friend',children:formatMessage(msg.content)},idx)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:content,onChange:e=>setcontent(e.target.value),placeholder:\"Type message\",rows:1,onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",style:{display:'none'},id:\"fileInput\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",className:\"file-upload\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",class:\"s-icon s-icon-icon-file-upload\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{\"fill-rule\":\"evenodd\",d:\"M10.534 2.027c-.533 0-1.04.213-1.413.587L2.994 8.74a3.348 3.348 0 0 0-.066 4.734 3.342 3.342 0 0 0 4.733.06l.08-.08 6.094-6.094c.26-.26.686-.26.946 0 .26.26.26.687 0 .947l-6.1 6.127a4.698 4.698 0 0 1-6.646-.014C.207 12.58.207 9.6 2.054 7.774L8.18 1.647a3.332 3.332 0 0 1 4.72 0 3.332 3.332 0 0 1 0 4.72l-6.133 6.127c-.78.78-2.053.78-2.833 0a2.008 2.008 0 0 1 0-2.834l5.66-5.626c.26-.26.686-.26.946 0 .26.26.26.686 0 .946l-5.66 5.654a.67.67 0 0 0-.006.94c.126.126.3.2.48.2a.651.651 0 0 0 .466-.2l6.133-6.127a2 2 0 0 0 0-2.827 2.015 2.015 0 0 0-1.42-.593Z\"})})}),/*#__PURE__*/_jsx(\"button\",{className:\"voice-btn\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",class:\"s-icon s-icon-icon-mic\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{\"fill-rule\":\"evenodd\",d:\"M8 10.667A2.666 2.666 0 0 0 10.667 8V2.667A2.67 2.67 0 0 0 9.887.78a2.672 2.672 0 0 0-3.773 0c-.5.5-.78 1.18-.78 1.887V8A2.666 2.666 0 0 0 8 10.667Zm-1.333-8c0-.734.6-1.334 1.333-1.334.734 0 1.334.6 1.334 1.334V8c0 .733-.6 1.333-1.334 1.333-.733 0-1.333-.6-1.333-1.333V2.667Zm6.667 4V8c0 2.72-2.034 4.96-4.667 5.287v1.38h2c.367 0 .667.3.667.666 0 .367-.3.667-.667.667H5.334a.669.669 0 0 1-.667-.667c0-.366.3-.666.667-.666h2v-1.38A5.326 5.326 0 0 1 2.667 8V6.667c0-.367.3-.667.667-.667C3.7 6 4 6.3 4 6.667V8c0 2.207 1.794 4 4 4 2.207 0 4-1.793 4-4V6.667c0-.367.3-.667.667-.667.367 0 .667.3.667.667Z\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u27A4\"})})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"chat-placeholder\",children:\"Select a friend to start chatting!\"})})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","io","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","socket","Home","navigate","user","setUser","friends","setFriends","selectedFriend","setSelectedFriend","messages","setMessages","content","setcontent","searchQuery","setSearchQuery","menuOpen","setMenuOpen","messagesEndRef","stored","localStorage","getItem","parsed","JSON","parse","_id","emit","get","then","res","data","catch","err","console","log","handleNewMessage","msg","isCurrentChat","sender","receiver","prev","on","off","fetchMessages","friend","error","sendMessage","trim","newMsg","timestamp","Date","status","post","handleLogout","removeItem","handleProfileClick","scrollToLastMessages","container","document","querySelector","all","children","length","target","scrollIntoView","behavior","scrollTop","scrollHeight","formatMessage","text","arguments","undefined","wordsPerLine","words","split","result","i","className","class","onClick","src","profileImage","alt","name","type","placeholder","value","onChange","e","filter","f","toLowerCase","includes","map","idx","ref","rows","onKeyDown","key","shiftKey","preventDefault","style","display","id","htmlFor","xmlns","width","height","fill","viewBox","d"],"sources":["C:/Users/adora/Desktop/local server - Copy/client/src/Home.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport './Home.css';\r\n\r\nconst socket = io('http://localhost:5000');\r\n\r\nfunction Home() {\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState(null);\r\n  const [friends, setFriends] = useState([]);\r\n  const [selectedFriend, setSelectedFriend] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [content, setcontent] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem('user');\r\n    if (stored) {\r\n      const parsed = JSON.parse(stored);\r\n      setUser(parsed);\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    if (user?._id) {\r\n      socket.emit('register', user._id);\r\n    }\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:5000/users').then(res => {\r\n      setFriends(res.data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user && selectedFriend) {\r\n      axios.get(`http://localhost:5000/messages/${user._id}/${selectedFriend._id}`)\r\n        .then(res => setMessages(res.data))\r\n        .catch(err => console.log(err));\r\n    }\r\n  }, [selectedFriend]);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const handleNewMessage = (msg) => {\r\n      const isCurrentChat =\r\n        selectedFriend &&\r\n        ((msg.sender === user._id && msg.receiver === selectedFriend._id) ||\r\n        (msg.sender === selectedFriend._id && msg.receiver === user._id));\r\n\r\n      if (isCurrentChat) {\r\n        setMessages((prev) => [...prev, msg]);\r\n      }\r\n    };\r\n\r\n    socket.on('newMessage', handleNewMessage);\r\n    return () => socket.off('newMessage', handleNewMessage);\r\n  }, [selectedFriend, user]);\r\n\r\n  const fetchMessages = async (friend) => {\r\n    setSelectedFriend(friend);\r\n    setMessages([]);\r\n    try {\r\n      const res = await axios.get(`http://localhost:5000/messages/${user._id}/${friend._id}`);\r\n      setMessages(res.data);\r\n    } catch (err) {\r\n      console.error(\"Error fetching messages:\", err);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async () => {\r\n    if (!content.trim()) return;\r\n\r\n    const newMsg = {\r\n      sender: user._id,\r\n      receiver: selectedFriend._id,\r\n      content,\r\n      timestamp: new Date(),\r\n      status: 'sent'\r\n    };\r\n\r\n    try {\r\n      await axios.post('http://localhost:5000/message', {\r\n        sender: user._id,\r\n        receiver: selectedFriend._id,\r\n        content,\r\n      });\r\n\r\n      setMessages(prev => [...prev, newMsg]);\r\n      socket.emit('send-message', newMsg);\r\n      setcontent('');\r\n    } catch (err) {\r\n      console.error('Error sending message:', err);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    navigate('/login');\r\n  };\r\n\r\n  const handleProfileClick = () => {\r\n    navigate('/profile');\r\n  };\r\n\r\n  const scrollToLastMessages = () => {\r\n    const container = document.querySelector('.messages');\r\n    if (container) {\r\n      const all = container.children;\r\n      if (all.length > 10) {\r\n        const target = all[all.length - 11];\r\n        target?.scrollIntoView({ behavior: 'auto' });\r\n      } else {\r\n        container.scrollTop = container.scrollHeight;\r\n      }\r\n    }\r\n  };\r\n  \r\n\r\n\r\n  const formatMessage = (text = '', wordsPerLine = 10) => {\r\n    const words = text.split(' ');\r\n    let result = '';\r\n    for (let i = 0; i < words.length; i++) {\r\n      result += words[i] + ' ';\r\n      if ((i + 1) % wordsPerLine === 0) result += '\\n';\r\n    }\r\n    return result.trim();\r\n  };\r\n  \r\n  \r\n\r\n\r\n\r\n  useEffect(() => {\r\n    scrollToLastMessages();\r\n  }, [messages]);\r\n\r\n  if (!user) return <div>Loading...</div>;\r\n\r\n  return (\r\n\r\n\r\n    \r\n\r\n\r\n    <div className=\"chat-app\">\r\n      <div className=\"sidebar\">\r\n      <div className=\"menu\">\r\n      \r\n      <div class=\"dropdown\">\r\n  <button class=\"dropbtn\"><span>&#9776;</span></button>\r\n  <div class=\"dropdown-content\">\r\n  <button onClick={handleProfileClick}>Profile</button><br></br>\r\n  <button onClick={handleLogout}>Logout</button>\r\n    \r\n  </div>\r\n</div>\r\n     \r\n              \r\n<h1>Telegram</h1>\r\n              \r\n            </div>\r\n\r\n            \r\n        \r\n        <div className=\"sidebar-header\">\r\n          <div className=\"profile\">\r\n            <div className=\"limon\"><img src={user.profileImage || '/default-profile.png'} alt=\"Profile\" className=\"profile-img\" />\r\n            <h2>{user.name}</h2>\r\n            </div>\r\n            \r\n\r\n           \r\n          </div>\r\n        </div>\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search friend\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          className=\"search-bar\"\r\n        />\r\n\r\n        <div className=\"friend-list\">\r\n          <h2>Chat List</h2>\r\n          {friends\r\n            .filter(f => f._id !== user._id && f.name && f.name.toLowerCase().includes((searchQuery || '').toLowerCase()))\r\n            .map(friend => (\r\n              <div\r\n                key={friend._id}\r\n                className=\"friend\"\r\n                onClick={() => fetchMessages(friend)}\r\n              >\r\n                {friend.name}\r\n              </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"chatbox\">\r\n        {selectedFriend ? (\r\n          <>\r\n            <div className=\"chat-header\">\r\n              <h2>{selectedFriend.name}</h2>\r\n            </div>\r\n            <div className=\"messages\">\r\n              {messages.map((msg, idx) => (\r\n                <div\r\n                  key={idx}\r\n                  className={msg.sender === user._id ? 'message me' : 'message friend'}\r\n                >\r\n                  {formatMessage(msg.content)}\r\n                </div>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            <div className=\"input-area\">\r\n              <textarea\r\n                value={content}\r\n                onChange={(e) => setcontent(e.target.value)}\r\n                placeholder=\"Type message\"\r\n                rows={1}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === 'Enter' && !e.shiftKey) {\r\n                    e.preventDefault();\r\n                    sendMessage();\r\n                  }\r\n                }}\r\n              />\r\n              <input type=\"file\" style={{ display: 'none' }} id=\"fileInput\" />\r\n              <label htmlFor=\"fileInput\" className=\"file-upload\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"s-icon s-icon-icon-file-upload\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M10.534 2.027c-.533 0-1.04.213-1.413.587L2.994 8.74a3.348 3.348 0 0 0-.066 4.734 3.342 3.342 0 0 0 4.733.06l.08-.08 6.094-6.094c.26-.26.686-.26.946 0 .26.26.26.687 0 .947l-6.1 6.127a4.698 4.698 0 0 1-6.646-.014C.207 12.58.207 9.6 2.054 7.774L8.18 1.647a3.332 3.332 0 0 1 4.72 0 3.332 3.332 0 0 1 0 4.72l-6.133 6.127c-.78.78-2.053.78-2.833 0a2.008 2.008 0 0 1 0-2.834l5.66-5.626c.26-.26.686-.26.946 0 .26.26.26.686 0 .946l-5.66 5.654a.67.67 0 0 0-.006.94c.126.126.3.2.48.2a.651.651 0 0 0 .466-.2l6.133-6.127a2 2 0 0 0 0-2.827 2.015 2.015 0 0 0-1.42-.593Z\"/>\r\n</svg></label>\r\n              <button className=\"voice-btn\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"s-icon s-icon-icon-mic\" viewBox=\"0 0 16 16\">\r\n  <path fill-rule=\"evenodd\" d=\"M8 10.667A2.666 2.666 0 0 0 10.667 8V2.667A2.67 2.67 0 0 0 9.887.78a2.672 2.672 0 0 0-3.773 0c-.5.5-.78 1.18-.78 1.887V8A2.666 2.666 0 0 0 8 10.667Zm-1.333-8c0-.734.6-1.334 1.333-1.334.734 0 1.334.6 1.334 1.334V8c0 .733-.6 1.333-1.334 1.333-.733 0-1.333-.6-1.333-1.333V2.667Zm6.667 4V8c0 2.72-2.034 4.96-4.667 5.287v1.38h2c.367 0 .667.3.667.666 0 .367-.3.667-.667.667H5.334a.669.669 0 0 1-.667-.667c0-.366.3-.666.667-.666h2v-1.38A5.326 5.326 0 0 1 2.667 8V6.667c0-.367.3-.667.667-.667C3.7 6 4 6.3 4 6.667V8c0 2.207 1.794 4 4 4 2.207 0 4-1.793 4-4V6.667c0-.367.3-.667.667-.667.367 0 .667.3.667.667Z\"/>\r\n</svg></button>\r\n              <button onClick={sendMessage}><span>&#10148;</span>\r\n              </button>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className=\"chat-placeholder\">Select a friend to start chatting!</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}